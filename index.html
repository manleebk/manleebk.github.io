<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Chrome OK - Safari FAIL (Japanese)</title>
  </head>
  <body>
    <h2>Test mailto với ký tự tiếng Nhật</h2>
    <button onclick="openMail()">Gửi Email chứa tiếng Nhật</button>

    <script>
      function openMail() {
        // Chuỗi tiếng Nhật dài (~250 ký tự)
        const jpText =
          "これは非常に長い日本語のテキストです。".repeat(10) +
          "\n\nさらに日本語の文章を追加してSafariを壊します。".repeat(10);

        // Encode
        const subject = encodeURIComponent(
          "日本語テスト - Chrome OK / Safari FAIL"
        );
        const body = encodeURIComponent(jpText);

        const url = `mailto:test@example.com?subject=${subject}&body=${body}`;

        console.log("URL length:", url.length); // khoảng 3000–3500 ký tự

        window.location.href = url;
      }
    </script>
  </body>
</html>
