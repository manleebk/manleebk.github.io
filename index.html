<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Safari FAIL - Chrome OK</title>
  </head>
  <body>
    <h2>Test mailto v∆∞·ª£t gi·ªõi h·∫°n Safari iPhone</h2>
    <button onclick="openMail()">G·ª≠i Email c·ª±c d√†i</button>

    <h3>mailto URL:</h3>
    <pre
      id="mailtoOutput"
      style="white-space: pre-wrap; word-break: break-all"
    ></pre>

    <script>
      function openMail() {
        // T·∫°o chu·ªói d√†i g·ªìm ti·∫øng Nh·∫≠t + emoji (~1200 k√Ω t·ª± √ó 10 l·∫ßn = >12.000 k√Ω t·ª± URL)
        const jpText =
          "„Åì„Çå„ÅØÈùûÂ∏∏„Å´Èï∑„ÅÑÊó•Êú¨Ë™ûccvv&*wwwwwww„Åì„Çå„ÅØ„Åì„ÅìüöÄüî•üí•üåà‚ú®".repeat(150);

        const subject = encodeURIComponent("„ÉÜ„Çπ„Éà - Safari FAIL, Chrome OK");
        const body = encodeURIComponent(jpText);

        const mailtoURL = `mailto:test@example.com?subject=${subject}&body=${body}`;

        // Hi·ªÉn th·ªã URL ra m√†n h√¨nh
        const outputEl = document.getElementById("mailtoOutput");
        outputEl.innerText = mailtoURL.length;

        console.log("URL length:", mailtoURL.length); // > 12.000 k√Ω t·ª±

        // Chuy·ªÉn h∆∞·ªõng ƒë·ªÉ m·ªü Mail app
        window.location.href = mailtoURL;
      }
    </script>
  </body>
</html>
